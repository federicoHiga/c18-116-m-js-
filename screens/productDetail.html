<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="../screens/styles/productDetail.css">
  <link rel="stylesheet" href="../styles/carrousel.css">
  <link rel="stylesheet" href="../styles/footer.css">
  <link rel="stylesheet" href="../styles/home.css" />
</head>

<body>
  <header>
    <!--Barra de navegacion -->
    <div class="container-fluid p-1">
      <div class="row d-flex justify-content-between">
        <div class="p-1 position-static">
          <nav class="navbar navbar-expand-xl navbar-light">
            <div class="container-fluid">
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav-toggler"
                aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse justify-content-between container-fluid" id="nav-toggler">
                <a class="navbar-brand" href="/index.html">
                  <img src="../src/atomo/logo_zenith.svg" width="75" alt="Logo de Zenith">
                </a>
                <!--Acordion-->
                <ul class="navbar-nav d-flex justify-content-center">
                  <li class="nav-item">
                    <div id="userStatus"></div>
                  </li>
                  <li class="nav-item justify-content-evenly">
                    <p class="d-flex flex-wrap align-items-center justify-content-between m-0">Calzados<a
                        class="nav-link active" aria-current="page" href="#">Ver Todo</a></p>
                  </li>
                  <li class="nav-item">
                    <div class="accordion" id="accordionExample">
                      <div class="accordion-item">
                        <h2 class="accordion-header">
                          <button class="accordion-button bg-white shadow-none" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            Hombre
                          </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse show"
                          data-bs-parent="#accordionExample">
                          <div class="accordion-body">
                            <div class="list-group align-items-center">
                              <a href="/screens/productos.html" class="list-group-item list-group">Zapatos Casuales</a>
                              <a href="/screens/productos.html" class="list-group-item list-group">Zapatos de Vestir</a>
                              <a href="/screens/productos.html" class="list-group-item list-group">Botas y Botines</a>
                              <a href="/screens/productos.html" class="list-group-item list-group">Zapatillas
                                Urbanas</a>
                              <a href="#" class="list-group-item list-group">Ver todo Hombre</a>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header">
                          <button class="accordion-button bg-white shadow-none collapsed" type="button"
                            data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false"
                            aria-controls="collapseTwo">
                            Mujer
                          </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                          <div class="accordion-body">
                            <div class="list-group align-items-center">
                              <a href="#" class="list-group-item list-group">Zapatos Mujer</a>
                              <a href="#" class="list-group-item list-group">Botas y Botines</a>
                              <a href="#" class="list-group-item list-group">Sandalias</a>
                              <a href="#" class="list-group-item list-group">Zapatillas Urbanas</a>
                              <a href="#" class="list-group-item list-group">Zapatillas Deportivas</a>
                              <a href="#" class="list-group-item list-group">Ver todo Mujer</a>
                            </div>
                          </div>
                        </div>
                        <div class="accordion-item">
                          <h2 class="accordion-header">
                            <button class="accordion-button bg-white shadow-none collapsed" type="button"
                              data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false"
                              aria-controls="collapseThree">
                              Niño
                            </button>
                          </h2>
                          <div id="collapseThree" class="accordion-collapse collapse"
                            data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                              <div class="list-group align-items-center">
                                <a href="#" class="list-group-item list-group">Zapatos Niños</a>
                                <a href="#" class="list-group-item list-group">Zapatos Niñas</a>
                                <a href="#" class="list-group-item list-group">Zapatos Bebé</a>
                                <a href="#" class="list-group-item list-group">Zapatillas</a>
                                <a href="#" class="list-group-item list-group">Sandalias</a>
                                <a href="#" class="list-group-item list-group">Ver todo Niños</a>
                              </div>
                            </div>
                          </div>
                          <div class="accordion-item">
                            <h2 class="accordion-header">
                              <button class="accordion-button bg-white shadow-none collapsed" type="button"
                                data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false"
                                aria-controls="collapseFour">
                                Hot Sale
                              </button>
                            </h2>
                            <div id="collapseFour" class="accordion-collapse collapse"
                              data-bs-parent="#accordionExample">
                              <div class="accordion-body">
                                <div class="list-group align-items-center">
                                  <a href="#" class="list-group-item list-group">Ver todo Hombre</a>
                                  <a href="#" class="list-group-item list-group">Ver todo Mujer</a>
                                  <a href="#" class="list-group-item list-group">Ver todo Niños</a>
                                </div>
                              </div>
                            </div>
                          </div>
                  </li>
                </ul>
                <section class="container-fluid d-flex justify-content-center">
                  <div class="iconos-RRSS-nav container-fluid d-flex justify-content-center">
                      <div class="row">
                          <a class="iconos-RRSS-nav-texto" aria-current="page" href="#">¿Necesitas Ayuda?</a>
                      </div>
                  </div>    
                  </section>
                  <div class="iconos-RRSS-nav w-100"> 
                    <div class="iconos-RRSS-nav-img container d-flex justify-content-center aling.align-items-center">
                      <a href="#"><img class="iconos-RRSS-nav-insta" src="/src/atomo/instagram.svg" width="23" alt="Logo de Instagram"></a>
                      <a href="#"></a><img class="iconos-RRSS-nav-face" src="/src/atomo/facebook.svg" width="25" alt="Logo de Facebook"></a>
                    </div>
                  </div>
              </div>
            </div>
          </div>
        </nav> 
        </div>
        <div class="logo-Zenith d-flex align-item-start justify-content-center col-4 mt-2">
          <a href="/index.html">
            <img src="../src/atomo/logo_zenith.svg" width="150" alt="Logo de Zenith">
          </a>

        </div>
        <!--Barra de navegacion-->
        <!--Barra de Busqueda-->
        <div class="barraBusqueda container-fluid py-2 d-flex justify-content-center">
          <form class="d-flex col-11 justify-content-center" role="search">
            <input class="form-control mx-0" type="search" placeholder="Buscar calzado..." aria-label="Search">
            <button class="btn btn-outline-success mx-0" type="submit"><img src="../src/atomo/serch.svg"></button>
          </form>
          <!--Barra de Busqueda-->



        </div>
        <!-- CART -->
        <div class="itemDeCompra col-2 d-flex justify-content-center align-self-start justify-content-center mt-3 ml-2"
          data-bs-toggle="modal" data-bs-target="#cartModal">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-bag"
            viewBox="0 0 16 16">
            <path
              d="M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1m3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1z" />
          </svg>
          <div id="cartCount"></div>
        </div>
        <!-- CART -->
      </div>
      <!-- MODAL -->
      <div class="modal" tabindex="-1" aria-labelledby="cartModal" id="cartModal">
        <div class="modal-dialog modal-fullscreen">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title">Carrito de compras</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div id="cart-items-conteiner">
                <div class="cart-item" id="cart-item"></div>
              </div>
              
            </div>
            <div class="modal-footer">
              <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> -->
              <button type="button" class="btn btn-primary">Finalizar compra</button>
            </div>
          </div>
        </div>
      </div>
      <!-- MODAL -->
      <!-- CARROUSEL -->
      <section class="carrousel">
        <div id="carouselExampleAutoplaying" class="carousel slide carrousel-div" data-bs-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img id="img1Detail"
                src="https://dcdn.mitiendanube.com/stores/662/630/products/whatsapp-image-2022-07-06-at-11-08-28-am1-a426715c65acac872816571174006319-640-0.jpeg"
                class="d-block w-100 carrousel-img" alt="..." />
            </div>
            <div class="carousel-item">
              <img id="img2Detail" src="https://falabella.scene7.com/is/image/Falabella/15703700_1?qlt=70"
                class="d-block w-100 carrousel-img" alt="..." />
            </div>
            <div class="carousel-item">
              <img id="img3Detail"
                src="https://acdn.mitiendanube.com/stores/868/037/products/9eb79231-f54a-4b92-b535-50a36fda83f11-4381d0d83c0e4c30c116516758448414-640-0.png"
                class="d-block w-100 carrousel-img" alt="..." />
            </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying"
            data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying"
            data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </section>
      <!-- CARROUSEL -->
  </header>
  <div class="product-container" id="idProducto">
    <div>
      <h4 id="marcaDetail">Nombre marca </h4>
    </div>
    <div>
      <h2 id="nombreDetail">Nombre producto </h2>
    </div>
    <div>
      <h7 id="codigoDetail">codigo:id producto</h7>
    </div>
    <div>
      <h2 id="precioDetail">precio</h2>
    </div>
    <div><label class="colorProducto">color:
        <br>
        <div id="colorsDiv" class="cajaColor">
          <!-- <button id="negro" class="colorProducto colorNegro" type="radio"></button>
          <button id="blanco" class="colorProducto colorBlanco" type="radio"></button>
          <button id="rojo" class="colorProducto colorRojo" type="radio"></button>
          <button id="azul" class="colorProducto colorAzul" type="radio"></button>
          <button id="verde" class="colorProducto colorAmarillo" type="radio"></button> -->


      </label>
    </div>
  </div>
  </div>
  <!-- ACÁ VAN LOS RECTANGULOS DE LOS TALLES -->
  <div>
    <div style="margin-top: 16px; margin-left: 16px;" class="tituloTalles">
        <h4>Talla:</h4>
    </div>
    <div class="cajaTalles" id="cajaTalles"
        style="width: 100%; height: 100%; justify-content: center; align-items: center; gap: 8px; display: inline-flex">

    </div>
</div>

  <!-- <div class="container text-center"> -->
  <div style="margin-right:12px; margin:16px; width: 332px; display: flex; justify-content: space-between;">
    <div >
      <h6>Conocé tu talla <a href="#modal1">aquí</a></h6>
      <div id="modal1" class="modalmask">
        <div class="modalbox movedown" style="width: 146px; height: 48px; display: flex; align-items: center;">
            <a href="#cerrar" title="Cerrar" class="cerrar">X</a>
            <div style="max-width:300px; z-index: 100;">
            <img style="max-width:300px; z-index: 100;" src="/src/productos/calzadoMujertalle.png">
          </div>
        </div>
    </div>
    <div
      style="width: 120px;border-radius: 8px; border: 1px solid black; display: flex; justify-content: space-between; align-items: center;">
      <button style="border: none; background-color:white ;" class="icon-button" id="decrement-btn"><img
          src="../src/atomo/menos.png"></button>
      <div id="counter" style="font-family: Roboto;font-size: 20px;font-weight: 400; line-height: normal;">1</div>
      <button style="border: none; background-color:white ;" class="icon-button" id="increment-btn"><img
          src="../src/atomo/más.png"></button>
    </div>
  </div>
  </div>
  <!-- add to cart -->
  <div class="row"
    style="margin-right:12px; margin-left:16px; width: 332px; display: flex; justify-content: space-between;">
    <button id="btnAddToCart" style="display: flex; width: 328px; height: 48px;padding: 10px;justify-content: center;align-items: center;gap: 10px;
      flex-shrink: 0; background-color: black;color: white; border-radius: 8px;" id="btn-productos">Añadir al
      carrito</button>
  </div>
  <!-- add to cart -->
  <!-- acá va el acordion de la descripción del producto -->
  <div class="accordion" id="accordionExample" style="margin: 16px;">
    <div class="">
      <h5 class="accordion-header" style="display: flex;width: 219px;height: 48px;align-items: center;" id="headingOne">
        <button class="accordion-button" type="button" style="padding: 0%;" data-bs-toggle="collapse"
          data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Descripción del producto
        </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
          data-bs-parent="#accordionExample">
          <div class="accordion-body">
            <p id="descripcionDetail">En ZENITH, queremos que estés completamente satisfecho con tu compra. Si por
              alguna razón no estás
              conforme con tu producto, ofrecemos una política de cambios y devoluciones sin complicaciones.
              Tienes hasta 30 días desde la fecha de compra para devolver
              o cambiar el artículo, siempre y cuando esté en su estado original, sin usar y con todas las
              etiquetas intactas. Para iniciar un cambio o devolución,
              simplemente contáctanos a través de nuestro servicio de atención al cliente o visita una de nuestras
              tiendas físicas. Recuerda tener a mano tu recibo de compra.
              Los reembolsos se procesarán a través del método de pago original dentro de los 7-10 días hábiles
              posteriores a la recepción del artículo devuelto.
              Si tienes alguna otra duda <a href="terminosycondiciones.html">Terminos y condiciones</a></p>
          </div>
        </div>
    </div>
    <hr>

  </div>
  <div style="margin: 16px;">
    <div>
      <h6>¿Quieres enviarnos un comentario sobre este producto?</h6>
    </div>
    <form action="" method="get" id="comentarios">
      <div style="width: 100%;"><label for="" style="width: 100%;">Nombre*: <input
            style="width: 100%;border-radius: 8px;" type="text" placeholder="Ingrese su nombre" required></label></div>
      <div style="width: 100%;"><label for="" style="width: 100%;">Correo electronico*: <input
            style="width: 100%;border-radius: 8px;" type="email" placeholder="Email" required></label></div>
      <div style="width: 100%;"><label for="comentario" style="width: 100%;">Comentario*:
          <input type="text" style="width: 100%; height: 100px;border-radius: 8px;" class="comentario"
            placeholder="Escriba su Comentario" required></label></il>
      </div>
      <div style="width: 100%;"><label class="puntuacion">
          <i class="bi bi-star-fill estrella" value="0"></i>
          <i class="bi bi-star-fill estrella" value="1"></i>
          <i class="bi bi-star-fill estrella" value="2"></i>
          <i class="bi bi-star-fill estrella" value="3"></i>
          <i class="bi bi-star-fill estrella" value="4"></i>
        </label></div>
      <div>
        <p style="font-size: 10px; color: #661010;">*Campo obligatorio</p>
      </div>
      <label for="submit">
        <input type="submit"
          style="  margin-bottom: 10px;width: 100%;color: rgb(255, 255, 255);width: 150px;height: 48px;border-radius: 8px;background-color: #0D0D0D"></label>
    </form>
  </div>
  </div>
  <!-- Footer section Begin -->
  <footer class="footer">
    <div class="container">
      <div class="row">
        <div class="col-lg-3 offset-lg-1 col-md-6 col-sm-6">
          <div class="footer-widget">
            <h6>Necesitas ayuda?</h6>
          </div>
        </div>
        <div class="col-lg-2 offset-lg-1 col-md-3 col-sm-6">
          <div class="footer-widget">
            <h6>Información</h6>
            <ul>
              <li><a href="#">Quienes somos?</a></li>
              <li><a href="#">Politica de privacidad</a></li>
              <li><a href="#">Términos y condiciones</a></li>
              <li><a href="#">Politica de cambio y devoluciones</a></li>
              <li><a href="#">Envios a domicilio y plazos de entrega</a></li>
            </ul>
          </div>
        </div>
        <div class="col-lg-3 offset-lg-1 col-md-6 col-sm-6">
          <div class="footer-widget">
            <h6>Contacto</h6>
            <div class="footer-newslatter">
              <p>Suscribete para recibir nuestras ofertas y descuentos</p>
              <form action="#">
                <input type="text" placeholder="Escribir correo electronico">
                <button type="submit"><span><i class="fa fa-envelope" arial-hidden="true"></i></span></button>
              </form>
            </div>
          </div>
          <ul>
            <p></a>Siguenos en nuestras redes:</p>
          </ul>
          <ul class="social-icons">
            <li><a href=""><i class="fab fa-facebook"></i></a></li>
            <li><a href=""><i class="fab fa-instagram"></i></a></li>
            <div class="col-lg-3 offset-lg-1 col-md-6 col-sm-6">
              <div class="footer-newslatter">
              </div>
            </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12 text-center">
        <div class="footer-copyright-text">
          <p>&copy; 2024. Todos los derechos reservados
        </div>
      </div>
    </div>
    </div>
  </footer>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="../screens/scripts/productDetail.js"></script>
<script src="../scripts/productos.js"></script>
<script src="../scripts/cardPrueba.js"></script>

<script>
  console.log("fuera");

  document.addEventListener('DOMContentLoaded', () => {
    init(() => {
    // console.log("dentro");
    const productId = new URL(document.location.toString()).searchParams.get('productId');
    const productsArray = Object.values(products);
    const product = productsArray.find(p => p.id == productId);
    // products.filter(p => p.categorias.includes("Hombre") && p.categorias.includes("Hot Sale"));
    console.log('productId: ', productId);
    // console.log(product.marca)
    const precioDetail = document.querySelector("#precioDetail");
    const marcaDetail = document.querySelector("#marcaDetail")
    const nombreDetail = document.querySelector("#nombreDetail")
    const descripcionDetail = document.querySelector("#descripcionDetail")
    const imagenDetail = document.querySelector("#imagenDetail")
    const codigoDetail = document.querySelector("#codigoDetail")
    const img1Detail = document.querySelector("#img1Detail")
    const img2Detail = document.querySelector("#img2Detail")
    const img3Detail = document.querySelector("#img3Detail")

    marcaDetail.innerHTML = product.marca
    precioDetail.innerHTML = "$" + product.precio
    nombreDetail.innerHTML = "Modelo: " + product.nombre
    codigoDetail.innerHTML = "Codigo: " + product.id
    descripcionDetail.innerHTML = product.descripcion
    img1Detail.src = product.image1
    img2Detail.src = product.image2
    img3Detail.src = product.image3

    //filtro colores
    const colorsDiv = document.getElementById("colorsDiv")
    const colores = product.color.map(color => {
      const colorBtn = document.createElement("button")
      colorBtn.classList.add('colorProducto', 'color-' + color.toLowerCase());
      colorBtn.addEventListener("click", () => {
        console.log("Button clicked:", color);
      });
      return colorBtn;
    })

    colores.forEach(function (color) {
      colorsDiv.appendChild(color);
    });
    console.log('colores desde html', colores);
    //filtro colores
  //talles
            const tallesDiv = document.getElementById("cajaTalles");

            const talles = product.talle.map(talle => {
                const talleDiv = document.createElement("div");
                talleDiv.classList.add('disponible', 'talla',"titulotalles");
                talleDiv.innerText = talle; // Añadir el texto del talle al div

                talleDiv.addEventListener("click", () => {
                    console.log("Button clicked:", talle);
                    // tallesDiv.innerText = `Selected size: ${talle}`; // Mostrar el valor dentro del div cajaTalles
                });

                return talleDiv;
            });

            talles.forEach(talle => {
                tallesDiv.appendChild(talle);
            });

            console.log('solo hay estos', talles);


    //cart inicio
    function addToCart(product) {
      function generateCartItemHTML(product, quantity) {
        const cartItem = document.getElementById('cart-item');
        // cartItem.classList.add('cart-item');

        const itemName = document.createElement('span');
        itemName.textContent = `Producto: ${product.nombre}`;
        cartItem.appendChild(itemName);

        const itemPrice = document.createElement('span');
        itemPrice.textContent = `Precio: $${product.precio}`;
        cartItem.appendChild(itemPrice);

        const itemQuantity = document.createElement('span');
        itemQuantity.textContent = `Cantidad: ${quantity}`;
        cartItem.appendChild(itemQuantity);

        const removeButton = document.createElement('button');
        removeButton.textContent = 'Eliminar';
        cartItem.appendChild(removeButton);
        removeButton.addEventListener('click', () => {
          removeFromCart(product.id); // Pass product ID for removal
        });

        return cartItem;
      }
      // Check if cart data exists in localStorage
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      // Find existing product in cart (if any)
      // findIndex evalua la condition si es true return: 1 sino: -1
      const existingProductIndex = cart.findIndex(item => item.id === product.id);
      console.log("exist: ", existingProductIndex)
      const cartCount = document.querySelector("#cartCount")

      if (existingProductIndex !== -1) {
        // Product already exists, update quantity
        cart[existingProductIndex].quantity++;
      } else {
        // Add new product to cart with quantity 1
        cart.push({ ...product, quantity: 1 }); // Spread operator preserves product properties
      }

      // Update localStorage with updated cart data
      localStorage.setItem('cart', JSON.stringify(cart));

      // Optional: Display confirmation message (consider using a UI library for better visuals)

      //cart counter y consollogeos
      const count = cart[existingProductIndex !== -1 ? existingProductIndex : cart.length - 1].quantity
      cartCount.innerHTML = count
      console.log(`${product.nombre} added to cart (quantity: ${cart[existingProductIndex !== -1 ? existingProductIndex : cart.length - 1].quantity})`);
      console.log('cart data: ', cart)

      const cartItemHTML = generateCartItemHTML(product, count);
      const cartItemsDiv = document.getElementById('cart-items-conteiner');
      cartItemsDiv.appendChild(cartItemHTML);

      updateCartCount(cart.length);

    }
    function removeFromCart(productId) {
  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  const productIndex = cart.findIndex(item => item.id === productId);

  if (productIndex !== -1) {
    cart.splice(productIndex, 1);
    localStorage.setItem('cart', JSON.stringify(cart));

    if (cartItemsDiv) {
      const cartItemToRemove = cartItemsDiv.querySelector(`[data-product-id="${productId}"]`); // Still use data attribute for UI removal (optional)
      if (cartItemToRemove) {
        cartItemsDiv.removeChild(cartItemToRemove);
      } else {
        console.warn("Cart item element not found for removed product:", productId);
      }
    }
    updateCartCount(cart.length); // Update cart count after removal
  } else {
    console.warn("Product with ID:", productId, "not found in cart");
  }
};


function updateCartCount(itemCount) {
  const cartCount = document.getElementById("cartCount");
  if (cartCount) {
    cartCount.innerHTML = itemCount;
  } else {
    console.warn("Cart count element (cartCount) not found!");
  }
}
    //call
    const addToCartButton = document.getElementById('btnAddToCart');
    addToCartButton.addEventListener('click', () => {
      addToCart(product); // Pass the product object to the function
    });
    //cart fin
  });

  const product = products.find(p => p.id == productId);
});
  // init(() => {
  //   // console.log("dentro");
  //   const productId = new URL(document.location.toString()).searchParams.get('productId');
  //   const productsArray = Object.values(products);
  //   const product = productsArray.find(p => p.id == productId);
  //   // products.filter(p => p.categorias.includes("Hombre") && p.categorias.includes("Hot Sale"));
  //   console.log('productId: ', productId);
  //   // console.log(product.marca)
  //   const precioDetail = document.querySelector("#precioDetail");
  //   const marcaDetail = document.querySelector("#marcaDetail")
  //   const nombreDetail = document.querySelector("#nombreDetail")
  //   const descripcionDetail = document.querySelector("#descripcionDetail")
  //   const imagenDetail = document.querySelector("#imagenDetail")
  //   const codigoDetail = document.querySelector("#codigoDetail")
  //   const img1Detail = document.querySelector("#img1Detail")
  //   const img2Detail = document.querySelector("#img2Detail")
  //   const img3Detail = document.querySelector("#img3Detail")

  //   marcaDetail.innerHTML = product.marca
  //   precioDetail.innerHTML = "$" + product.precio
  //   nombreDetail.innerHTML = "Modelo: " + product.nombre
  //   codigoDetail.innerHTML = "Codigo: " + product.id
  //   descripcionDetail.innerHTML = product.descripcion
  //   img1Detail.src = product.image1
  //   img2Detail.src = product.image2
  //   img3Detail.src = product.image3

  //   //filtro colores
  //   const colorsDiv = document.getElementById("colorsDiv")
  //   const colores = product.color.map(color => {
  //     const colorBtn = document.createElement("button")
  //     colorBtn.classList.add('colorProducto', 'color-' + color.toLowerCase());
  //     colorBtn.addEventListener("click", () => {
  //       console.log("Button clicked:", color);
  //     });
  //     return colorBtn;
  //   })

  //   colores.forEach(function (color) {
  //     colorsDiv.appendChild(color);
  //   });
  //   console.log('colores desde html', colores);
  //   //filtro colores

  //   //cart inicio
  //   function addToCart(product) {
  //     function generateCartItemHTML(product, quantity) {
  //       const cartItem = document.getElementById('cart-item');
  //       // cartItem.classList.add('cart-item');

  //       const itemName = document.createElement('span');
  //       itemName.textContent = `Producto: ${product.nombre}`;
  //       cartItem.appendChild(itemName);

  //       const itemPrice = document.createElement('span');
  //       itemPrice.textContent = `Precio: $${product.precio}`;
  //       cartItem.appendChild(itemPrice);

  //       const itemQuantity = document.createElement('span');
  //       itemQuantity.textContent = `Cantidad: ${quantity}`;
  //       cartItem.appendChild(itemQuantity);

  //       const removeButton = document.createElement('button');
  //       removeButton.textContent = 'Eliminar';
  //       cartItem.appendChild(removeButton);
  //       removeButton.addEventListener('click', () => {
  //         removeFromCart(product.id); // Pass product ID for removal
  //       });

  //       return cartItem;
  //     }
  //     // Check if cart data exists in localStorage
  //     let cart = JSON.parse(localStorage.getItem('cart')) || [];
  //     // Find existing product in cart (if any)
  //     // findIndex evalua la condition si es true return: 1 sino: -1
  //     const existingProductIndex = cart.findIndex(item => item.id === product.id);
  //     console.log("exist: ", existingProductIndex)
  //     const cartCount = document.querySelector("#cartCount")

  //     if (existingProductIndex !== -1) {
  //       // Product already exists, update quantity
  //       cart[existingProductIndex].quantity++;
  //     } else {
  //       // Add new product to cart with quantity 1
  //       cart.push({ ...product, quantity: 1 }); // Spread operator preserves product properties
  //     }

  //     // Update localStorage with updated cart data
  //     localStorage.setItem('cart', JSON.stringify(cart));

  //     // Optional: Display confirmation message (consider using a UI library for better visuals)

  //     //cart counter y consollogeos
  //     const count = cart[existingProductIndex !== -1 ? existingProductIndex : cart.length - 1].quantity
  //     cartCount.innerHTML = count
  //     console.log(`${product.nombre} added to cart (quantity: ${cart[existingProductIndex !== -1 ? existingProductIndex : cart.length - 1].quantity})`);
  //     console.log('cart data: ', cart)

  //     const cartItemHTML = generateCartItemHTML(product, count);
  //     const cartItemsDiv = document.getElementById('cart-items');
  //     cartItemsDiv.appendChild(cartItemHTML);

  //   }
  //   //call
  //   const addToCartButton = document.getElementById('btnAddToCart');
  //   addToCartButton.addEventListener('click', () => {
  //     addToCart(product); // Pass the product object to the function
  //   });
  //   //cart fin
  // });

  // const product = products.find(p => p.id == productId);



</script>
<script src="./scripts/cart.js"></script>
<script src="./scripts/filtro.js"></script>

</html>